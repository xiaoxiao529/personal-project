<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>开测福利幸运抽奖</title>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
	</head>
	<body>
		<div class="container">
			<div class="slogan"><img src="img/slogan.png"/></div>
			<div class="logo"><img src="img/logo.png"/></div>
			
			<!--用户信息-->
			<div class="user_info">
				<span>814152449@qq.com</span> <a href="javascript:;">【退出】</a>
			</div>
			
			<div class="lottery_wrap clear">
				
				<div class="fl left_side">
					<!--choujiang begin-->
	                <div id="lottery">
	                	
	                	<div class="cj_records"><a href="javascript:;">我的抽奖记录</a></div>
	                	
	                    <ul class="mulitlineUl_01">
	                        <li class="item1 imp">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-1 ">
	                                <img src="img/gift1.gif" width="" height="">
	                                <span class="text">大乱斗限定头像X7天</span>
	                            </a>
	                        </li>
	                        <li class="item2">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-2">
	                                <img src="img/gift2.png" width="" height="">
	                                <span class="text">魂玉碎片X50</span>
	                            </a>
	                        </li>
	                        <li class="item3">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-3">
	                                <img src="img/gift3.png" width="" height="">
	                                <span class="text">四转虎符X50</span>
	                            </a>
	                        </li>
	                        <li class="item4">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-4">
	                                <img src="img/gift4.png" width="" height="">
	                                <span class="text">武魂盒X1</span>
	                            </a>
	                        </li>
	                        <li class="item5">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-5">
	                                <img src="img/gift5.png" width="" height="">
	                                <span class="text">灵魂石X1</span>
	                            </a>
	                        </li>
	                        <li class="item6">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-6">
	                                <img src="img/gift6.png" width="" height="">
	                                <span class="text">四转虎符X100</span>
	                            </a>
	                        </li>
	                        <li class="item7 ">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-7 ">
	                                <img src="img/gift7.png" width="" height="">
	                                <span class="text">魂玉碎片X100</span>
	                            </a>
	                        </li>
	                        <li class="item8">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-8">
	                                <img src="img/gift8.gif" width="" height="">
	                                <span class="text">大乱斗限定头像X14天</span>
	                            </a>
	                        </li>
	                        <li class="item9">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-9">
	                                <img src="img/gift9.png" width="" height="">
	                                <span class="text">达人虎符X50</span>
	                            </a>
	                        </li>
	                        <li class="item10">
	                            <a href="javascript:;" class="lottery-unit lottery-unit-10">
	                                <img src="img/gift10.png" width="" height="">
	                                <span class="text">将星石X1</span>
	                            </a>
	                        </li>
	                        
	                    </ul>
	                    <div class="starBtn">
	                        <a href="javascript:;" id="startBtn"></a>
	                    </div>

	                </div>
	                <!--choujiang end-->
				</div>
				
				<div class="fl right_side">
					
					<p class="download">
						<img src="img/download.png"/>
					</p>
					<p class="btn01">
						<a href="javascript:;"></a>
						<span>本次测试仅限安卓用户</span>
					</p>
					<p class="rules"><img src="img/rules.png"/></p>
				</div>
				
			</div>
			
			<!--遮罩-->
			<div class="mask"></div>
			
			<div class="alert_box01">
				<div class="close"><a href="javascript:;"><img src="img/close.png"></a></div>
				<!--将星石-->
				<div class="jl_con">
					<img style="padding-top: 40px;" src="img/gift1.png">
					<p>大乱斗限定头像X7天</p>
				</div>
				<div class="btn"><a href="javascript:;"></a></div>
			</div>
			
			<div class="alert_box02" style="display:none;">
				<div class="close"><a href="javascript:;"><img src="img/close.png"></a></div>
				<h3><img src="img/ico02.png"/></h3>
				<p class="text">
					您的抽奖次数不足！
				</p>
				<div class="btn"><a href="javascript:;"></a></div>
			</div>
			
			
			<!--中奖纪录-->
				<div class="alert_box03">
					<div class="close"><a href="javascript:;"><img src="img/close.png"/></a></div>
					
					<div class="jl_list_wrap">
						
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
						<div class="clear jl_list">
							<p class="fl list_p1">四转虎符X100</p>
							<p class="fr list_p3">2018-03-06 14：31</p>
						</div>
					</div>
					
					
				</div>
			
			
		</div>
		
		<script src="js/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.nicescroll.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			
			$(function(){
				
				var lottery = {
			        index: 0,	//当前转动到哪个位置，起点位置
			        count: 10,	//总共有多少个位置
			        timer: 0,	//setTimeout的ID，用clearTimeout清除
			        speed: 20,	//初始转动速度
			        times: 0,	//转动次数
			        cycle: 50,	//转动基本次数：即至少需要转动多少次再进入抽奖环节
			        prize: -1,	//中奖位置
			        init: function (id) { //初始化，获取jq节点，加样式
			            if ($("#" + id).find(".lottery-unit").length > 0) {
			                $lottery = $("#" + id);
			                $units = $lottery.find(".lottery-unit");
			                this.obj = $lottery;
			                this.count = $units.length;
			                $lottery.find(".lottery-unit-" + this.index).addClass("active");
			            };
			        },
			        roll: function () {
			            var index = this.index;
			            var count = this.count;
			            var lottery = this.obj;
			            $(lottery).find(".lottery-unit-" + index).removeClass("active");  //当前的移除，下一个加上active
			            index += 1;
			            if (index > count) {
			                index = 0;
			            };
			            $(lottery).find(".lottery-unit-" + index).addClass("active");
			            this.index = index;
			            return false;
			        },
			        stop: function (index) {
			            this.prize = index;
			            return false;
			        }
			    };
			
			    function roll() {
			        lottery.times += 1;
			        lottery.roll();
			        if (lottery.times > lottery.cycle + 10 && lottery.prize == lottery.index) {
			            clearTimeout(lottery.timer);
			            lottery.prize = -1;
			            lottery.times = 0;
			            click = false;
			        } else {
			            if (lottery.times < lottery.cycle) {
			                lottery.speed -= 10;
			            } else if (lottery.times == lottery.cycle) {
			                var index = Math.random() * (lottery.count) | 0;
			                lottery.prize = index;
			            } else {
			                if (lottery.times > lottery.cycle + 10 && ((lottery.prize == 0 && lottery.index == 7) || lottery.prize == lottery.index + 1)) {
			                    lottery.speed += 110;
			                } else {
			                    lottery.speed += 20;
			                }
			            }
			            if (lottery.speed < 40) {
			                lottery.speed = 40;
			            };
			            //console.log(lottery.times+'^^^^^^'+lottery.speed+'^^^^^^^'+lottery.prize);
			            lottery.timer = setTimeout(roll, lottery.speed);
			        }
			        return false;
			    }
			
			    var click = false;
			    window.onload = function () {
			        lottery.init('lottery');
			        $("#startBtn").click(function () {
			            if (click) {
			                return false;
			            } else {
			                lottery.speed = 100;
			                roll();
			                click = true;
			                return false;
			            }
			        });
			    };
			    
			    $(".close").click(function(){
		            $(this).parent().hide();
		            $(".mask").hide();
		        });
		        
		        
		        /*获奖记录滚动条*/
				$(".jl_list_wrap").niceScroll({
		            cursorcolor:"#f16100",
		            cursoropacitymax:1,
		            cursoropacitymin:1,
		            touchbehavior:false,
		            cursorwidth:"4px",
		            cursorborder:"1px solid #f16100",
		            cursorborderradius:"4px",
		            railpadding: { top: 0, right: -20, left: 0, bottom: 0 }
		        });

			    
			})
			
		</script>
	</body>
</html>
